---
title: Adobe Journey Optimizer in-app messaging
description: Learn how to create in-app messages to a mobile app with Platform Mobile SDK and Adobe Journey Optimizer.
solution: Data Collection,Journey Optimizer
feature-set: Journey Optimizer
hide: yes
---
# Adobe Journey Optimizer in-app messaging

Learn how to create in-app messages for mobile apps with Platform Mobile SDK and Adobe Journey Optimizer.

Journey Optimizer allows you to create your journeys and send in-app messages to targeted audiences. Before you send in-app messages with Journey Optimizer, you must ensure that the proper configurations and integrations are in place. To understand the in-app messaging data flow in Adobe Journey Optimizer, refer to [the documentation](https://experienceleague.adobe.com/docs/journey-optimizer/using/in-app/inapp-configuration.html?lang=en).

>[!NOTE]
>
>This lesson is optional and only applies to Adobe Journey Optimizer users looking to send in-app messages. 


## Prerequisites

* Successfully built and run app with SDKs installed and configured.
* Access to Adobe Journey Optimizer and sufficient permissions as described [here](https://experienceleague.adobe.com/docs/journey-optimizer/using/configuration/configuration-message/push-config/push-configuration.html?lang=en). Also you need sufficient permissions to the following Adobe Journey Optimizer features.
  * Create a campaign.
* Paid Apple developer account with sufficient access to create certificates, identifiers, and keys.
* Physical iOS device or simulator for testing.
* [Registered App ID with APN](journey-optimizer-push.md#register-app-id-with-apn)
* [Added your app push credentials in Data Collection](journey-optimizer-push.md#add-your-app-push-credentials-in-data-collection)
* [Installed Adobe Journey Optimizer tags extension](journey-optimizer-push.md#install-adobe-journey-optimizer-tags-extension)
* [Implemented Adobe Journey Optimizer in the app](journey-optimizer-push.md#implement-adobe-journey-optimizer-in-the-app)


## Validate with Assurance

1. Review the [setup instructions](assurance.md) section.
1. Install the app on your physical device or on the simulator.
1. Launch the app using the Assurance generated URL.
1. In the Assurance UI, select **[!UICONTROL Configure]**.
    ![configure click](assets/push-validate-config.png)
1. Select the ![Plus](https://spectrum.adobe.com/static/icons/workflow_18/Smock_AddCircle_18_N.svg) button next to **[!UICONTROL In-App Messaging]**.
1. Select **[!UICONTROL Save]**.
    ![save](assets/assurance-in-app-config.png)
1. Select **[!UICONTROL In-App Messaging]** from the left navigation.
1. Select the **[!UICONTROL Validation]** tab.
1. Confirm that you aren't getting any errors.
   ![In-App Validation](assets/assurance-in-app-validate.png)


## Create your own in-app message

To create your own in-app message, you must define a campaign in Journey Optimizer that triggers an in-app message based on events that occur. These events can be:

* data sent to Adobe Experience Platform,
* core tracking events, like action, or state or collection of PII data, through the Mobile Core generic API's,
* application lifecycle events, such as launch, install, upgrade, close, or crash,
* geolocation events, like entering or exiting a point of interest.

In this tutorial, you are going to use the Mobile Core generic and extension-independent APIs to facilitate the event tracking of user screens, actions, and PII data. Events generated by these APIs are published to the SDK event hub and are available for use by extensions. For instance, when the Analytics extension is installed, all user actions and app screens event data is sent to the appropriate Analytics reporting endpoints. 

1. In the Journey Optimizer UI, select **[!UICONTROL Campaigns]** from the left rail.
1. Select **[!UICONTROL Create Campaign]**.
1. In the **[!UICONTROL Create Campaign]** screen: 
   1. Select **[!UICONTROL In-app message]** and select **[!UICONTROL Luma Mobile App]** from the **[!UICONTROL App surface]** list.
   1. Select **[!UICONTROL Create]**
      ![Campaign Properties](assets/ajo-campaign-properties.png)
1. In the Campaign definition screen, at **[!UICONTROL Properties]**, enter a **[!UICONTROL Name]** for the campaign, for example `Luma - In-App Messaging Campaign`, and a **[!UICONTROL Description]**, for example `In-app messaging campaign for Luma app`.
   ![Campaign name](assets/ajo-campaign-properties-name.png)
1. Scroll down to **[!UICONTROL Action]**, and select **[!UICONTROL Edit Content]**.
1. In the **[!UICONTROL In-App Message]** screen:
   1. Select **[!UICONTROL Modal]** as the **[!UICONTROL Message Layout]**.
   2. Enter `https://luma.enablementadobe.com/content/dam/luma/en/logos/Luma_Logo.png` for **[!UICONTROL Media URL]**.
   3. Enter a **[!UICONTROL Header]**, for example `Welcome to this Luma In-App Message` and enter a **[!UICONTROL Body]**, for example `Triggered by pushing that button in the app...`.
   4. Enter **[!UICONTROL Dismiss]** as the **[!UICONTROL Button #1 text (primary)]**.
   5. Note how the preview is updated.
   6. Select **[!UICONTROL Review to activate]**.
      ![In-app editor](assets/ajo-in-app-editor.png)
1. In the **[!UICONTROL Review to activate (Luma - In-App Messaging Campaign)]** screen, select ![Edit](https://spectrum.adobe.com/static/icons/workflow_18/Smock_Edit_18_N.svg) in the **[!UICONTROL Schedule]** tile.
   ![Review schedule select Schedule](assets/ajo-review-select-schedule.png)
1. Back in the **[!UICONTROL Luma - In-App Messaging Campaign]** screen, select ![Edit](https://spectrum.adobe.com/static/icons/workflow_18/Smock_Edit_18_N.svg) **[!UICONTROL Edit triggers]**.
1. In the **[!UICONTROL In-app message trigger]** dialog, you configure the details of the track action that triggers the in-app message:
   1. To remove **[!UICONTROL Application launch event]**, select ![Close](https://spectrum.adobe.com/static/icons/workflow_18/Smock_Close_18_N.svg) .
   1. Use ![Add](https://spectrum.adobe.com/static/icons/workflow_18/Smock_AddCircle_18_N.svg) **[!UICONTROL Add condition]** repeatedly to build the following logic for **[!UICONTROL Show message if]**.
   1. Click **[!UICONTROL Done]**.
      ![Trigger logic](assets/ajo-trigger-logic.png)
    
   You have defined a track action, where the **[!UICONTROL Action]** equals `in-app` and the **[!UICONTROL Context data]** with the action is a key value pair of `"showMessage" : "true"`.

1. Back in the **[!UICONTROL Luma - In-App Messaging Campaign]** screen, select **[!UICONTROL Review to activate]**.
1. In the **[!UICONTROL Review to activate (Luma - In-App Messaging Campaign)]** screen, select **[!UICONTROL Activate]**.
1. You see your **[!UICONTROL Luma - In-App Messaging Campaign]** with status **[!UICONTROL Live]** in the **[!UICONTROL Campaigns]** list.
   ![Campaign list](assets/ajo-campaign-list.png)


## Triggering the in-app message

You have all the ingredients in place to send an in-app message. What remains is how to trigger this in-app message in your code.

1. Go to Luma > Luma > Utils > MobileSDK in Xcode Project navigator, find the `func sendTrackAction(action: String, data: [String: Any]?)` function, and add the following code, which calls the `MobileCore.track` function, based on the parameters `action` and `data`.

    
    ```swift
    // send trackAction event
    MobileCore.track(action: action, data: data)
    ```  

1. Go to **[!UICONTROL Luma]** > **[!UICONTROL Luma]** > **[!UICONTROL Views]** > **[!UICONTROL General]** > **[!UICONTROL ConfigView]** in Xcode Project Navigator. Find the code for the In-App Message button and add the following code:

    ```swift
    Task {
        AEPService.shared.sendTrackAction(action: "in-app", data: ["showMessage": "true"])
    }
    ```

## Validate using your app

1. Open your app on a device or in the simulator.

1. Go to the **[!UICONTROL Settings]** tab.

1. Tap **[!UICONTROL In-App Message]**. You see the in-app message appear in your app.

   <img src="assets/ajo-in-app-message.png" width=300/>


## Validate in Assurance

You can validate your in-app messages in the Assurance UI. 

1. Select **[!UICONTROL In-App Messaging]**.
1. Select **[!UICONTROL Event List]**.
1. Select a **[!UICONTROL Display message]** entry.
1. Inspect the raw event, especially the `html`, which contains the complete layout and content of the in-app message.
    ![Assurance In-App Message](assets/assurance-in-app-display-message.png)
   

## Implement in your app

You should now have all the tools to start adding push notifications, where relevant and applicable, to the Luma app. For example, welcoming the user when logging into the app, or when approaching a specific geolocation.

>[!SUCCESS]
>
>You have now enabled the app for in-app messaging and added an in-app messaging campaign using Adobe Journey Optimizer and the Adobe Journey Optimizer extension for the Adobe Experience Platform Mobile SDK.<br/>Thank you for investing your time in learning about Adobe Experience Platform Mobile SDK. If you have questions, want to share general feedback, or have suggestions on future content, share them on this [Experience League Community discussion post](https://experienceleaguecommunities.adobe.com/t5/adobe-experience-platform-launch/tutorial-discussion-implement-adobe-experience-cloud-in-mobile/td-p/443796).

Next: **[Conclusion and next steps](conclusion.md)**
